<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Smart Notes</title>
  <style>
    body{font-family: Arial, sans-serif; background:#f5f6f8; margin:0;}
    .topbar{background:#fff; padding:18px 24px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 10px rgba(0,0,0,.05);}
    .container{max-width:1100px; margin:24px auto; padding:0 16px;}
    .card{background:#fff; border-radius:12px; padding:18px; box-shadow:0 8px 20px rgba(0,0,0,.08); margin-bottom:18px;}
    input, textarea{width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; margin:8px 0;}
    textarea{min-height:90px;}
    .btn{background:#2b6cb0; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer;}
    .btn-link{background:transparent; border:none; color:#2b6cb0; cursor:pointer; text-decoration:underline; padding:0;}
    table{width:100%; border-collapse:collapse; background:#fff; border-radius:10px; overflow:hidden;}
    th{background:#111; color:#fff; text-align:left; padding:12px;}
    td{padding:12px; border-top:1px solid #eee; vertical-align:top;}
    .actions a{color:#2b6cb0; text-decoration:none; margin-right:10px;}
    .small{color:#666; font-size:13px;}
  </style>
</head>

<body>

  <div class="topbar">
    <div>
      <h2 style="margin:0;">Smart Notes</h2>
      <div class="small">Logged in as: {{ user.email }}</div>
    </div>
    <div>
      <a href="/logout" class="actions">Logout</a>
    </div>
  </div>

  <div class="container">

    <!-- Add Note (same page) -->
    <div class="card" id="add-form">
      <h3 style="margin-top:0;">Add New Note</h3>

      <form method="post" action="/add-note">
        <input name="title" placeholder="Title" required>
        <textarea name="content" placeholder="Content" required></textarea>
        <input name="tags" placeholder="Tags (comma separated)  e.g. work,sql,project">
        <input name="category" placeholder="Category  e.g. Study / Personal / Office">
        <button class="btn" type="submit">Add Note</button>
      </form>
    </div>

    <h3>Your Notes</h3>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Content</th>
          <th>Tags</th>
          <th>Category</th>
          <th>Created Time</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>
      {% for n in notes %}
        <tr>
          <td>{{ n.note_no }}</td>
          <td>{{ n.title }}</td>
          <td>{{ n.content }}</td>
          <td>
            {% if n.tags %}
              {{ ", ".join(n.tags) }}
            {% else %}
              -
            {% endif %}
          </td>
          <td>{{ n.category if n.category else "-" }}</td>
          <td>{{ n.created_at if n.created_at else "-" }}</td>
          <td class="actions">
            <a href="/edit-note/{{ n._id }}">Edit</a>
            <form method="post" action="/delete-note/{{ n._id }}" style="display:inline;">
              <button class="btn-link" type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% else %}
        <tr><td colspan="7">No notes yet.</td></tr>
      {% endfor %}
      </tbody>
    </table>

  </div>
</body>
</html>
